<jhi-alert-error></jhi-alert-error>
<jhi-alert></jhi-alert>

<div class="parent">
  <!-- Main Event Card List -->
  <div class="div1">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="title" data-cy="EventHeading" jhiTranslate="prosperPathApp.event.home.title">Events</h2>
      <div class="button-alignment-container d-flex gap-2">
        <button class="btn btn-info" (click)="load()" [disabled]="isLoading">
          <fa-icon icon="sync" [animation]="isLoading ? 'spin' : undefined"></fa-icon>
        </button>
        <button class="btn btn-primary" [routerLink]="['/event/new']">
          <fa-icon icon="plus"></fa-icon>
        </button>
      </div>
    </div>

    <jhi-filter [filters]="filters"></jhi-filter>

    <!-- No events -->
    <div *ngIf="events().length === 0" class="alert alert-warning" id="no-result">
      <span jhiTranslate="prosperPathApp.event.home.notFound">No Events found</span>
    </div>

    <!-- Event Cards -->
    <div *ngIf="events().length > 0" class="card-list">
      <div *ngFor="let event of events(); trackBy: trackId" class="event-card" (click)="handleEventClick(event)">
        <div class="card-body d-flex flex-column">
          <h5 class="card-subTitle">{{ event.createdAt | formatMediumDate }}</h5>
          <h5 class="card-title">{{ event.name ? (event.name | truncate: 18) : '' }}</h5>
          <p class="card-text mb-1">
            <strong jhiTranslate="prosperPathApp.event.team">Team:</strong>
            <span *ngIf="event.team"
              ><b> {{ event.team.name }}</b>
            </span>
            <span *ngIf="!event.team">—</span>
          </p>
          <p class="card-text mb-2">
            <strong jhiTranslate="prosperPathApp.event.keyPayer">Key Payer:</strong>
            <span *ngIf="event.keyPayer"
              ><b>{{ event.keyPayer.name }}</b></span
            >
            <span *ngIf="!event.keyPayer">—</span>
          </p>

          <!-- Action buttons (Edit/Delete) -->
          <div class="action-buttons d-flex gap-2">
            <a
              [routerLink]="['/event', event.id, 'edit']"
              class="btn btn-primary btn-sm edit-btn"
              title="Edit"
              (click)="$event.stopPropagation()"
            >
              <fa-icon icon="pencil-alt"></fa-icon>
            </a>
            <button type="button" (click)="delete(event); $event.stopPropagation()" class="btn btn-danger btn-sm delete-btn" title="Delete">
              <fa-icon icon="times"></fa-icon>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div *ngIf="events().length > 0" class="pagination-container mt-3">
      <div class="d-flex justify-content-center mb-2">
        <jhi-item-count [params]="{ page, totalItems, itemsPerPage }"></jhi-item-count>
      </div>
      <div class="d-flex justify-content-center">
        <ngb-pagination
          [collectionSize]="totalItems"
          [page]="page"
          [pageSize]="itemsPerPage"
          [maxSize]="5"
          [rotate]="true"
          [boundaryLinks]="true"
          (pageChange)="navigateToPage($event)"
          class="custom-pagination"
        ></ngb-pagination>
      </div>
    </div>
  </div>

  <!-- Side Panels -->
  <div class="div2">
    <jhi-team></jhi-team>
  </div>

  <div class="div3">
    <jhi-member></jhi-member>
  </div>
</div>
